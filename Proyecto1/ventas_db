CREATE KEYSPACE ventas_sa WITH replication = {'class': 'SimpleStrategy', 'replication_factor' : 3};

USE ventas_sa;

CREATE TYPE precio_historial (
    fecha TIMESTAMP,
    precio DECIMAL
);

CREATE TABLE productos (
    codigo_producto UUID PRIMARY KEY,
    nombre TEXT,
    marca TEXT,
    fabricante TEXT,
    precio_actual DECIMAL,
    historial_precios LIST<FROZEN<precio_historial>>
);

CREATE TABLE clientes (
    codigo_cliente UUID PRIMARY KEY,
    nombre_empresa TEXT,
    representante_legal TEXT,
    telefono TEXT,
    direccion TEXT,
    tipo_empresa TEXT
);

CREATE TYPE cuarto_frio (
    codigo_cuarto_frio UUID,
    capacidad DECIMAL,
    temperatura DECIMAL
);

CREATE TABLE bodegas (
    codigo_bodega UUID PRIMARY KEY,
    capacidad_m3 DECIMAL,
    tiene_cuartos_frios BOOLEAN,
    cuartos_frios LIST<FROZEN<cuarto_frio>>
);

CREATE TYPE producto_pedido (
    codigo_producto UUID,
    cantidad INT,
    precio_unitario DECIMAL,
    precio_total DECIMAL
);

CREATE TABLE pedidos (
    codigo_pedido UUID PRIMARY KEY,
    codigo_cliente UUID,
    fecha TIMESTAMP,
    productos LIST<FROZEN<producto_pedido>>,
    total DECIMAL
);

